!function(a,b,c){c.Player.registerExtension("areas",{initialize:function(){var b,d=this.$container.find(".smile-area-wrapper"),e=d.dataObject("smile"),f={ratio:1,fixedWidthRatio:!1,widthRatio:.5},g={container:d,area1:a(d.find(".smile-area")[0]),area2:a(d.find(".smile-area")[1]),sizes:{ratio:2,fixedRatio:!1,minRatio:null,maxRatio:null,area1:a.extend({},f),area2:a.extend({},f)}};this._areas=g,g.area2.length||(g.area2=null),b=c.util.parseRatio(e.ratio),b&&(g.sizes.fixedRatio=!0,g.sizes.ratio=b),e.minRatio&&(g.sizes.minRatio=e.minRatio),e.maxRatio&&(g.sizes.maxRatio=e.maxRatio),g.area2?(b=c.util.parseRatio(g.area1.attr("width")),b?(this.setWidthRatio(b),g.sizes.area1.fixedWidthRatio=!0):(b=c.util.parseRatio(g.area2.attr("width")),b&&(this.setWidthRatio(null,b),g.sizes.area2.fixedWidthRatio=!0))):g.sizes.fixedRatio&&(g.sizes.area1.ratio=g.sizes.ratio)},ready:function(){},tracksReady:function(){this.updateRatio()},updateRatio:function(){var a={ratio:this.getVideoRatio()},b={ratio:this.getArea2Ratio()};this.setAreaSizes(a,b),this.updateAreaView()},getArea2Ratio:function(){var a=this._areas.area2[0].smileDisplay;return a&&a.getRatio?a.getRatio():4/3},switchAreas:function(){var a=this._areas.container.find(".smile-left"),b=this._areas.container.find(".smile-right");a.removeClass("smile-left").addClass("smile-right"),b.removeClass("smile-right").addClass("smile-left")},updateAreaView:function(){var a=this._areas,b=a.sizes.ratio;c.util.addCssRule("#"+this.$container.attr("id")+" .smile-area-wrapper:after","padding-top: "+100/b+"%;"),a.area1.width(100*a.sizes.area1.widthRatio+"%"),a.area2&&a.area2.width(100*a.sizes.area2.widthRatio+"%")},setAreaSizes:function(b,c){var d=this._areas;a.extend(d.sizes.area1,{width:b.width,height:b.height,ratio:b.width/b.height||b.ratio||d.sizes.area1.ratio}),a.extend(d.sizes.area2,{width:c.width,height:c.height,ratio:c.width/c.height||c.ratio||d.sizes.area2.ratio});var e,f,g;if(d.area2?d.sizes.fixedRatio?(e=d.sizes.ratio,d.sizes.area1.fixedWidthRatio||d.sizes.area2.fixedWidthRatio?(f=d.sizes.area1.widthRatio*e,g=d.sizes.area2.widthRatio*e):c.width?(f=d.sizes.area1.ratio,g=e-f):(g=d.sizes.area2.ratio,f=e-g)):(f=d.sizes.area1.ratio,g=d.sizes.area2.ratio,d.sizes.area1.fixedWidthRatio?(e=g/(1-d.sizes.area1.widthRatio),f=e-g):d.sizes.area2.fixedWidthRatio?(e=f/(1-d.sizes.area2.widthRatio),g=e-f):e=f+g,(d.sizes.maxRatio&&e>d.sizes.maxRatio||d.sizes.minRatio&&e<d.sizes.minRatio)&&(e=d.sizes.maxRatio&&e>d.sizes.maxRatio?d.sizes.maxRatio:d.sizes.minRatio,f.width?g=e-f:f=e-g)):(e=f=d.sizes.area1.ratio,g=0),f+g!=e)throw new Error("Area ratios don't match");this.setWidthRatio(f/e),this.setAreaRatios(f,g)},setAreaRatios:function(b,c){var d=this._areas;a.extend(d.sizes,{ratio:b+c}),a.extend(d.sizes.area1,{ratio:b,widthRatio:b/d.sizes.ratio}),a.extend(d.sizes.area2,{ratio:c,widthRatio:c/d.sizes.ratio})},setWidthRatio:function(a,b){a?(this._areas.sizes.area1.widthRatio=a,this._areas.sizes.area2.widthRatio=1-a):(this._areas.sizes.area2.widthRatio=b,this._areas.sizes.area1.widthRatio=1-b)}})}(jQuery,mejs,smile);