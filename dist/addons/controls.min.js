!function(a,b,c){c.Player.registerExtension("controls",{initialize:function(){this._controls={container:this.$container.find(".smile-controls")},this._controls.container[0].smile=this},isFullscreen:function(){return document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||this.$container.hasClass("smile-fullscreen-fake")},enterFullscreen:function(){this.container.webkitRequestFullScreen?this.container.webkitRequestFullScreen():this.container.mozRequestFullScreen?this.container.mozRequestFullScreen():this.container.msRequestFullscreen?this.container.msRequestFullscreen():this.container.requestFullScreen?this.container.requestFullScreen():(this.$container.addClass("smile-fullscreen-fake smile-fullscreen"),this._controls.setFullscreenButton()),setTimeout(this.resize,0)},exitFullscreen:function(){document.cancelFullScreen?document.cancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.exitFullscreen?document.exitFullscreen():(this.$container.removeClass("smile-fullscreen-fake smile-fullscreen"),this._controls.setFullscreenButton()),setTimeout(this.resize,0)},ready:function(){var b=this,d=this._controls,e=function(a){d.container.find(".smile-button-play").removeClass("play pause").addClass(a),d.container.find(".smile-button-play i").removeClass("fa-play fa-pause").addClass("fa-"+a)},f=function(){var a="vol3";b.media.muted?a="vol0":(b.media.volume<.66&&(a="vol2"),b.media.volume<.33&&(a="vol1"),0==b.media.volume&&(a="vol0")),d.container.find(".smile-button-volume").removeClass("vol0 vol1 vol2 vol3").addClass(a),d.container.find(".smile-volume-progress-bar").css("width",(b.media.muted?0:100*b.media.volume)+"%"),d.container.find(".smile-button-volume i").removeClass("fa-volume-up fa-volume-down fa-volume-off").addClass("vol0"==a?"fa-volume-off":"vol3"==a?"fa-volume-up":"fa-volume-down")},g=a.delay(100,function(){var a=b.isFullscreen();d.container.find(".smile-button-fullscreen").removeClass("open close").addClass(a?"close":"open"),d.container.find(".smile-button-fullscreen i").removeClass("fa-expand fa-compress").addClass(a?"fa-compress":"fa-expand")}),h=function(){var a;for(a=b.media.buffered.length-1;a>=0;a-=1)if(b.media.buffered.start(a)<b.media.currentTime)return a;return 0},i=function(){if(b.media.duration){var a=b.media.buffered.length&&b.media.buffered.end(h()),e=b.media.currentTime,f=b.media.duration;d.container.find(".smile-time-display").text(c.util.formatTime(1e3*e)),d.container.find(".smile-time-progress-bar").css("width",e/f*100+"%"),d.container.find(".smile-time-progress-buffer").css("width",100*(a&&a>e?(a-e)/f:0)+"%")}},j=function(a,b){var c=(a.pageX-b.offset().left)/b.width();return 0>c&&(c=0),c>1&&(c=1),c},k=function(a){27==a.keyCode&&b.isFullscreen()&&b.exitFullscreen()};this.media.addEventListener("timeupdate",function(){i()}),this.media.addEventListener("playing",function(){e("pause"),f(),i()}),this.media.addEventListener("waiting",function(){e("pause")}),this.media.addEventListener("pause",function(){e("play")}),this.media.addEventListener("ended",function(){e("play")}),this.media.addEventListener("volumechange",function(){f()}),this.media.addEventListener("progress",function(){i()}),d.container.on("click",".smile-button-play.play",function(a){b.media.play(),a.preventDefault()}),d.container.on("click",".smile-button-play.pause",function(a){b.media.pause(),a.preventDefault()}),d.container.on("click",".smile-button-volume",function(a){b.media.setMuted(!b.media.muted),a.preventDefault()}),d.container.on("click",".smile-button-fullscreen,.smile-button-fullscreen.open",function(a){a.preventDefault(),b.enterFullscreen()}),d.container.on("click",".smile-button-fullscreen.close",function(a){a.preventDefault(),b.exitFullscreen()}),d.container.on("mouseup",".smile-time-progress",function(a){if(b.media.duration){var c=j(a,d.container.find(".smile-time-progress"));b.media.setCurrentTime(c*b.media.duration)}}),d.container.on("mouseup",".smile-volume-progress",function(a){if(!b.media.muted){var c=j(a,d.container.find(".smile-volume-progress"));b.media.setVolume(c)}}),document.addEventListener("fullscreenchange",g),document.addEventListener("webkitfullscreenchange",g),document.addEventListener("mozfullscreenchange",g),document.addEventListener("keydown",k),e("play"),g(),d.resize=function(){b.$container.find(".smile-media, .smile-area, video").css("max-height",a(window).height()-40+"px");var d=b.isFullscreen();if(d&&(c.util.isFirefox()||b.$container.hasClass("smile-fullscreen-fake"))){var e=b.$container.find(".smile-media, .smile-area-wrapper"),f=e.height()+(b.$container.find(".smile-controls").height()||0),g=a(window).height();b.$container.css("padding-top",(g-f)/2)}else b.$container.css("padding-top",0)},d.resize(),d.setFullscreenButton=g,this.addEventListener("resize",d.resize)}})}(jQuery,mejs,smile);