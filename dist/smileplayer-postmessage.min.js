!function(a){var b=a.EventDispatcher=function(){};b.prototype={constructor:b,apply:function(a){a.addEventListener=b.prototype.addEventListener,a.hasEventListener=b.prototype.hasEventListener,a.removeEventListener=b.prototype.removeEventListener,a.dispatchEvent=b.prototype.dispatchEvent},addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]),-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners,d=c[a];if(void 0!==d){var e=d.indexOf(b);-1!==e&&d.splice(e,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var b=this._listeners,c=b[a.type];if(void 0!==c){a.target=this;for(var d=[],e=c.length,f=0;e>f;f++)d[f]=c[f];for(var f=0;e>f;f++)d[f].call(this,a)}}}}}(window);var smile={};!function(a,b){function c(a){var c=b.util.stringTrim(a);123===c.charCodeAt(0)&&(c=c.slice(1,-1));var d,e,f=[],g=c.match(j),h=0;if(g){g.push(",");for(var i,m=0;i=g[m];++m){var n=i.charCodeAt(0);if(44===n){if(0>=h){d&&f.push(e?{key:d,value:e.join("")}:{unknown:d}),d=e=h=0;continue}}else if(58===n){if(!e)continue}else if(47===n&&m&&i.length>1){var o=g[m-1].match(k);o&&!l[o[0]]&&(c=c.substr(c.indexOf(i)+1),g=c.match(j),g.push(","),m=-1,i="/")}else if(40===n||123===n||91===n)++h;else if(41===n||125===n||93===n)--h;else if(!d&&!e){d=34===n||39===n?i.slice(1,-1):i;continue}e?e.push(i):e=[i]}}return f}var d='"(?:[^"\\\\]|\\\\.)*"',e="'(?:[^'\\\\]|\\\\.)*'",f="/(?:[^/\\\\]|\\\\.)*/w*",g=",\"'{}()/:[\\]",h="[^\\s:,/][^"+g+"]*[^\\s"+g+"]",i="[^\\s]",j=RegExp(d+"|"+e+"|"+f+"|"+h+"|"+i,"g"),k=/[\])"'A-Za-z0-9_$]+$/,l={"in":1,"return":1,"typeof":1};b.util={stringTrim:function(a){return null===a||void 0===a?"":a.trim?a.trim():a.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},parseObjectLiteral:function(d){var e={};return a.each(c(d),function(a,c){c.unknown?e[c.unknown]=!0:e[c.key]="{"==(c.value||"").substr(0,1)?b.util.parseObjectLiteral(c.value):c.value}),e},capitalize:function(a){return a.substr(0,1).toUpperCase()+a.substr(1)},bindAll:function(b,c){for(var d=0;d<c.length;d+=1)b[c[d]]=a.proxy(b[c[d]],b);return b},horizontalAreas:function(a,b){a.ratio=a.width/a.height,b.ratio=b.width/b.height;var c={ratio:a.ratio+b.ratio,area1:a,area2:b};return a.widthPercentage=a.ratio/c.ratio,b.widthPercentage=b.ratio/c.ratio,c},formatTime:function(a,c,d){for(var e="",f=c?Math.floor(a/1e3):Math.round(a/1e3),g=0;2>g;g+=1)e.length>0&&(e=":"+e),e=b.util.pad(f%60,2)+e,f=Math.floor(f/60);if((f>0||d)&&(e=b.util.pad(f,2)+":"+e),c){var h=""+a;e=e+"."+h.substr(h.length-3)}return e},parseTime:function(a){for(var b=a.split(":"),c=0,d=b.length-1;d>=0;d-=1)c+=d===b.length-1?parseFloat(b[d],10):Math.pow(60,b.length-1-d)*parseInt(b[d],10);return c!==c?0:~~(1e3*c)},pad:function(a,b,c,d){void 0===c&&(c="0");for(var e=""+a,f=(""+a).length;b>f;f+=1)d?e+=c:e=c+e;return e},parseRatio:function(a){var b=null;return a||(a=""),a.search("/")>-1?(a=a.split("/"),b=parseFloat(a[0])/parseFloat(a[1])):a.search("%")>-1?b=parseFloat(a)/100:a&&(b=parseFloat(a)),b},addCssRule:function(a,b){if(document.styleSheets[0].addRule)document.styleSheets[0].addRule(a,b);else if(document.styleSheets[0].insertRule){var c=document.createElement("style");c.innerHTML=a+"{"+b+"}",document.getElementsByTagName("head")[0].appendChild(c)}},stringToDoc:function(a){var b,c;return window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):(c=new DOMParser,b=c.parseFromString(a,"text/xml")),b}},a.fn.dataObject=function(c){return b.util.parseObjectLiteral(a(this).data(c))},a.throttle=jq_throttle=function(b,c,d,e){function f(){function a(){h=+new Date,d.apply(i,k)}function f(){g=void 0}var i=this,j=+new Date-h,k=arguments;e&&!g&&a(),g&&clearTimeout(g),void 0===e&&j>b?a():c!==!0&&(g=setTimeout(e?f:a,void 0===e?b-j:b))}var g,h=0;return"boolean"!=typeof c&&(e=d,d=c,c=void 0),a.guid&&(f.guid=d.guid=d.guid||a.guid++),f},a.debounce=function(a,b,c){return void 0===c?jq_throttle(a,b,!1):jq_throttle(a,c,b!==!1)},a.delay=function(a,b){return function(){setTimeout(b,a)}}}(jQuery,smile),function(a,b){b.PostmessagePlayer=function(b,c){b=a(b)[0];var d=b.tagName.toLowerCase();if("iframe"==d?this.node=b:(b=a(a(b).find("iframe")[0])[0],b&&(this.node=b)),!this.node)throw new Error("Needs <iframe> or an element containing one");this.$node=a(this.node),this.uuid=0,this._promises={},this.options=c,this.initialize()},a.extend(b.PostmessagePlayer.prototype,EventDispatcher.prototype,{initialize:function(){b.util.bindAll(this,["onWindowMessage"]),this.targetOrigin=this.$node.attr("src").split("/").slice(0,3).join("/"),this.id="smileEmbed"+(""+Math.random()).slice(2,8),a(window).on("message",this.onWindowMessage);var c=this;setTimeout(function(){c._postMessage({method:"registerParent"})},1e3)},onWindowMessage:function(a){var b,c;try{b=JSON.parse(a.originalEvent.data)}catch(d){return}"registerChild"==b.method?this.registerChild(b.args,a.originalEvent.source):"event"==b.method?(c=this.dispatchEvent,b.args[0].target=this,b.prefix&&(b.args[0].target=this[b.prefix],c=this[b.prefix].dispatchEvent),c.call(b.args[0].target,b.args[0])):"callback"==b.method&&this._promises[b.uuid]&&this._promises[b.uuid].resolve.apply(this._promises[b.uuid],b.args)},registerChild:function(a){var b=(a[0],a[1]);this._setupMethods(this,b)},_setupMethods:function(b,c,d){var e=this;a.each(c,function(c,f){f===!0?b[c]=function(){var b,f,g="get"===c.substr(0,3),h=a.makeArray(arguments);return g&&h.length&&a.isFunction(h[0])&&(f=h[0],h=h.slice(1)),b=e._postMessage({method:(d||"")+c,args:h},g),g&&b&&f&&b.done(f),b}:(b[c]=new EventDispatcher,e._setupMethods(b[c],f,c+"."))})},_postMessage:function(b,c){var d;return c&&(this.uuid+=1,b.uuid=this.uuid,d=this._promises[b.uuid]=a.Deferred()),this.node.contentWindow.postMessage(JSON.stringify(b),this.targetOrigin),d}})}(jQuery,smile);